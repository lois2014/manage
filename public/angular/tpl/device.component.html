<h1>{{ title }}</h1>

<div *ngIf="ADD==0">
    <button (click)="add()">新增</button>
    <h2>My Devices</h2>
        <table class="heroes" *ngIf="devices">
            <thead>
            <tr>
              <th>ID</th>
              <th>名称</th>
              <th>型号</th>
              <th>类型</th>
              <th>负责人</th>
              <th>制造商</th>
              <th>计量单位</th>
              <th>状态</th>
            </tr>
            </thead>
           <tbody>
            <tr *ngFor="let device of devices" (click)="onSelect(device)" [class.selected]="device === selected">
                <td>{{device.id}}</td>
                <td>{{device.name}}</td>
                <td>{{device.version}}</td>
                <td>{{device.type_name}}</td>
                <td>{{device.master}}</td>
                <td>{{device.maker_name}}</td>
                <td>{{device.measure}}</td>
                <td>{{device.dev_status}}</td>
            </tr>
           </tbody>
        </table>
    <!--<my-hero-detail [hero]="selectedHero"></my-hero-detail>-->
    <div *ngIf="selected">
        <h2>
            {{selected.name}}
        </h2>
        <button (click)="gotoDetail()">view Details</button>
    </div>
</div>

<div *ngIf="ADD">
    <div class="container" >
    <div  [hidden]="submitted">
        <h1>ADD Device</h1>
        <form *ngIf="active" (ngSubmit)="onSubmit()" #device="ngForm">
            <div class="form-group">
                <label for="name">Name</label>
                <input type="text" class="form-control" id="name" placeholder="name" required
                       [(ngModel)] = "model.name" name="name" #name="ngModel"
                >
                <div [hidden]="name.valid || name.pristine"
                     class="alert alert-danger">
                    Name is required
                </div>
            </div>
            <div class="form-group">
                <label for="version">Version</label>
                <input type="text" class="form-control" id="version"  placeholder="version" required
                       [(ngModel)] = "model.version" name="version" #version="ngModel"
                >
                <div [hidden]="version.valid || version.pristine"
                     class="alert alert-danger">
                    version is required
                </div>
            </div>
            <div class="form-group">
                <label for="type_id">Type</label>
                <select class="form-control" id="type_id"
                        required
                        [(ngModel)]="model.type_id" name="type_id"
                        #type_id="ngModel" >
                    <option *ngFor="let p of type" [value]="p.id">{{p.type_name}}</option>
                </select>
                <div [hidden]="type_id.valid || type_id.pristine" class="alert alert-danger">
                    type is required
                </div>
            </div>
            <div class="form-group">
                <label for="maker_id">Maker</label>
                <select class="form-control" id="maker_id"
                        required
                        [(ngModel)]="model.maker_id" name="maker_id"
                        #maker_id="ngModel" >
                    <option *ngFor="let m of maker" [value]="m.id">{{m.name}}</option>
                </select>
                <div [hidden]="maker_id.valid || maker_id.pristine" class="alert alert-danger">
                    maker is required
                </div>
            </div>
            <div class="form-group">
                <label for="code">Code</label>
                <input type="text" class="form-control" id="code"  placeholder="code" required
                       [(ngModel)] = "model.code" name="code" #code="ngModel"
                >
                <div [hidden]="code.valid || code.pristine"
                     class="alert alert-danger">
                    code is required
                </div>
            </div>
            <div class="form-group">
                <label for="master">Master</label>
                <input type="text" class="form-control" id="master"  placeholder="master" required
                       [(ngModel)] = "model.master" name="master" #master="ngModel"
                >
                <div [hidden]="master.valid || master.pristine"
                     class="alert alert-danger">
                    master is required
                </div>
            </div>
            <div class="form-group">
                <label for="measure">Measure</label>
                <input type="text" class="form-control" id="measure"  placeholder="measure" required
                       [(ngModel)] = "model.measure" name="measure" #measure="ngModel"
                >
                <div [hidden]="measure.valid || measure.pristine"
                     class="alert alert-danger">
                    measure is required
                </div>
            </div>
            <button type="submit" class="btn btn-default" [disabled]="!device.form.valid">Submit</button>
                <button class="btn btn-default" (click)="cancel()">Cancel</button>
        </form>
    </div>
</div>
</div>
